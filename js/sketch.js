// Generated by CoffeeScript 2.5.1
var Ball, active, balls, col, counter, createBall, d, draw, level, mousePressed, radie, reset, setup, start, stopp;

active = 0;

start = null;

stopp = 0;

level = 0;

radie = 50;

counter = 0;

col = [255, 0, 0];

d = [-1, 1, 0];

Ball = class Ball {
  constructor(x1, y1, dx1, dy1, r1, g1, b1) {
    this.x = x1;
    this.y = y1;
    this.dx = dx1;
    this.dy = dy1;
    this.r = r1;
    this.g = g1;
    this.b = b1;
    this.active = true;
  }

  rita() {
    if (!this.active) {
      return;
    }
    if (this.x > width - radie) {
      this.dx = -this.dx;
    }
    if (this.x < radie) {
      this.dx = -this.dx;
    }
    this.x += this.dx;
    if (this.y > height - radie) {
      this.dy = -this.dy;
    } else {
      this.dy += 0.1;
    }
    this.y += this.dy;
    fc(this.r, this.g, this.b);
    return circle(this.x, this.y, radie);
  }

  inside(mx, my) {
    return dist(this.x, this.y, mx, my) < radie;
  }

};

balls = [];

setup = function() {
  createCanvas(windowWidth, windowHeight);
  radie = (windowWidth + windowHeight) / 30;
  return reset();
};

reset = function() {
  var i, j, len, ref, results;
  level++;
  radie *= 0.95;
  start = new Date();
  ref = range(level);
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    results.push(createBall());
  }
  return results;
};

draw = function() {
  var ball, i, j, k, l, len, len1, len2, ref, ref1, results, results1;
  background(col[0], col[1], col[2]);
  for (j = 0, len = balls.length; j < len; j++) {
    ball = balls[j];
    ball.rita();
  }
  if (active === 0) {
    sc(0);
    sw(3);
    fc(1);
    textSize(50);
    textAlign(CENTER, CENTER);
    text((stopp - start) / 1000, width / 2, height / 2);
  }
  if (frameCount % 2 === 0) {
    counter++;
    if (counter % 257 === 256) {
      ref = range(3);
      results = [];
      for (k = 0, len1 = ref.length; k < len1; k++) {
        i = ref[k];
        results.push(d[i] = col[i] > 128 ? _.random(-1, 0) : _.random(0, 1));
      }
      return results;
    } else {
      ref1 = range(3);
      results1 = [];
      for (l = 0, len2 = ref1.length; l < len2; l++) {
        i = ref1[l];
        results1.push(col[i] += d[i]);
      }
      return results1;
    }
  }
};

mousePressed = function() {
  var ball, i, j, len, ref, results;
  if (active === 0) {
    return reset();
  } else {
    ref = range(balls.length - 1, -1, -1);
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      ball = balls[i];
      if (ball.active && ball.inside(mouseX, mouseY)) {
        ball.active = false;
        active--;
        if (active === 0) {
          stopp = new Date();
        }
        break;
      } else {
        results.push(void 0);
      }
    }
    return results;
  }
};

createBall = function() {
  var b, dx, dy, g, r, x, y;
  active++;
  x = random(50, width);
  y = random(50, 100);
  dx = random(-2, 2);
  dy = random(-0.3, 0.3);
  r = random(1);
  g = random(1);
  b = random(1);
  return balls.push(new Ball(x, y, dx, dy, r, g, b));
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxVQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQTs7QUFBQSxNQUFBLEdBQVM7O0FBQ1QsS0FBQSxHQUFROztBQUNSLEtBQUEsR0FBUTs7QUFDUixLQUFBLEdBQVE7O0FBQ1IsS0FBQSxHQUFROztBQUNSLE9BQUEsR0FBVTs7QUFDVixHQUFBLEdBQU0sQ0FBQyxHQUFELEVBQUssQ0FBTCxFQUFPLENBQVA7O0FBQ04sQ0FBQSxHQUFJLENBQUMsQ0FBQyxDQUFGLEVBQUksQ0FBSixFQUFNLENBQU47O0FBRUUsT0FBTixNQUFBLEtBQUE7RUFDQyxXQUFjLEdBQUEsSUFBQSxLQUFBLEtBQUEsSUFBQSxJQUFBLElBQUEsQ0FBQTtJQUFDLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUFJLElBQUMsQ0FBQTtJQUFJLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUN6QyxJQUFDLENBQUEsTUFBRCxHQUFVO0VBREc7O0VBRWQsSUFBTyxDQUFBLENBQUE7SUFDTixJQUFHLENBQUksSUFBQyxDQUFBLE1BQVI7QUFBb0IsYUFBcEI7O0lBQ0EsSUFBRyxJQUFDLENBQUEsQ0FBRCxHQUFLLEtBQUEsR0FBTSxLQUFkO01BQXlCLElBQUMsQ0FBQSxFQUFELEdBQU0sQ0FBQyxJQUFDLENBQUEsR0FBakM7O0lBQ0EsSUFBRyxJQUFDLENBQUEsQ0FBRCxHQUFLLEtBQVI7TUFBbUIsSUFBQyxDQUFBLEVBQUQsR0FBTSxDQUFDLElBQUMsQ0FBQSxHQUEzQjs7SUFDQSxJQUFDLENBQUEsQ0FBRCxJQUFNLElBQUMsQ0FBQTtJQUVQLElBQUcsSUFBQyxDQUFBLENBQUQsR0FBSyxNQUFBLEdBQU8sS0FBZjtNQUEwQixJQUFDLENBQUEsRUFBRCxHQUFNLENBQUMsSUFBQyxDQUFBLEdBQWxDO0tBQUEsTUFBQTtNQUEwQyxJQUFDLENBQUEsRUFBRCxJQUFLLElBQS9DOztJQUVBLElBQUMsQ0FBQSxDQUFELElBQU0sSUFBQyxDQUFBO0lBQ1AsRUFBQSxDQUFHLElBQUMsQ0FBQSxDQUFKLEVBQU0sSUFBQyxDQUFBLENBQVAsRUFBUyxJQUFDLENBQUEsQ0FBVjtXQUNBLE1BQUEsQ0FBTyxJQUFDLENBQUEsQ0FBUixFQUFVLElBQUMsQ0FBQSxDQUFYLEVBQWEsS0FBYjtFQVZNOztFQVdQLE1BQVMsQ0FBQyxFQUFELEVBQUksRUFBSixDQUFBO1dBQVcsSUFBQSxDQUFLLElBQUMsQ0FBQSxDQUFOLEVBQVEsSUFBQyxDQUFBLENBQVQsRUFBVyxFQUFYLEVBQWMsRUFBZCxDQUFBLEdBQW9CO0VBQS9COztBQWRWOztBQWdCQSxLQUFBLEdBQVE7O0FBRVIsS0FBQSxHQUFRLFFBQUEsQ0FBQSxDQUFBO0VBQ1AsWUFBQSxDQUFhLFdBQWIsRUFBeUIsWUFBekI7RUFDQSxLQUFBLEdBQVEsQ0FBQyxXQUFBLEdBQVksWUFBYixDQUFBLEdBQTJCO1NBQ25DLEtBQUEsQ0FBQTtBQUhPOztBQUtSLEtBQUEsR0FBTyxRQUFBLENBQUEsQ0FBQTtBQUNQLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0VBQUMsS0FBQTtFQUNBLEtBQUEsSUFBUztFQUNULEtBQUEsR0FBUSxJQUFJLElBQUosQ0FBQTtBQUNSO0FBQUE7RUFBQSxLQUFBLHFDQUFBOztpQkFDQyxVQUFBLENBQUE7RUFERCxDQUFBOztBQUpNOztBQU9QLElBQUEsR0FBTyxRQUFBLENBQUEsQ0FBQTtBQUNQLE1BQUEsSUFBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE9BQUEsRUFBQTtFQUFDLFVBQUEsQ0FBVyxHQUFHLENBQUMsQ0FBRCxDQUFkLEVBQWtCLEdBQUcsQ0FBQyxDQUFELENBQXJCLEVBQXlCLEdBQUcsQ0FBQyxDQUFELENBQTVCO0VBQ0EsS0FBQSx1Q0FBQTs7SUFDQyxJQUFJLENBQUMsSUFBTCxDQUFBO0VBREQ7RUFFQSxJQUFHLE1BQUEsS0FBUSxDQUFYO0lBQ0MsRUFBQSxDQUFHLENBQUg7SUFDQSxFQUFBLENBQUcsQ0FBSDtJQUNBLEVBQUEsQ0FBRyxDQUFIO0lBQ0EsUUFBQSxDQUFTLEVBQVQ7SUFDQSxTQUFBLENBQVUsTUFBVixFQUFpQixNQUFqQjtJQUNBLElBQUEsQ0FBSyxDQUFDLEtBQUEsR0FBTSxLQUFQLENBQUEsR0FBYyxJQUFuQixFQUF3QixLQUFBLEdBQU0sQ0FBOUIsRUFBZ0MsTUFBQSxHQUFPLENBQXZDLEVBTkQ7O0VBUUEsSUFBRyxVQUFBLEdBQVcsQ0FBWCxLQUFnQixDQUFuQjtJQUNDLE9BQUE7SUFDQSxJQUFHLE9BQUEsR0FBVSxHQUFWLEtBQWlCLEdBQXBCO0FBQ0M7QUFBQTtNQUFBLEtBQUEsdUNBQUE7O3FCQUNDLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBVSxHQUFHLENBQUMsQ0FBRCxDQUFILEdBQVMsR0FBWixHQUFxQixDQUFDLENBQUMsTUFBRixDQUFTLENBQUMsQ0FBVixFQUFZLENBQVosQ0FBckIsR0FBd0MsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxDQUFULEVBQVcsQ0FBWDtNQURoRCxDQUFBO3FCQUREO0tBQUEsTUFBQTtBQUdLO0FBQUE7TUFBQSxLQUFBLHdDQUFBOztzQkFBQSxHQUFHLENBQUMsQ0FBRCxDQUFILElBQVUsQ0FBQyxDQUFDLENBQUQ7TUFBWCxDQUFBO3NCQUhMO0tBRkQ7O0FBWk07O0FBcUJQLFlBQUEsR0FBZSxRQUFBLENBQUEsQ0FBQTtBQUNmLE1BQUEsSUFBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQTtFQUFDLElBQUcsTUFBQSxLQUFVLENBQWI7V0FDQyxLQUFBLENBQUEsRUFERDtHQUFBLE1BQUE7QUFHQztBQUFBO0lBQUEsS0FBQSxxQ0FBQTs7TUFDQyxJQUFBLEdBQUssS0FBSyxDQUFDLENBQUQ7TUFDVixJQUFHLElBQUksQ0FBQyxNQUFMLElBQWdCLElBQUksQ0FBQyxNQUFMLENBQVksTUFBWixFQUFtQixNQUFuQixDQUFuQjtRQUNDLElBQUksQ0FBQyxNQUFMLEdBQWM7UUFDZCxNQUFBO1FBQ0EsSUFBRyxNQUFBLEtBQVUsQ0FBYjtVQUNDLEtBQUEsR0FBUSxJQUFJLElBQUosQ0FBQSxFQURUOztBQUVBLGNBTEQ7T0FBQSxNQUFBOzZCQUFBOztJQUZELENBQUE7bUJBSEQ7O0FBRGM7O0FBYWYsVUFBQSxHQUFhLFFBQUEsQ0FBQSxDQUFBO0FBQ2IsTUFBQSxDQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtFQUFDLE1BQUE7RUFDQSxDQUFBLEdBQUksTUFBQSxDQUFPLEVBQVAsRUFBVSxLQUFWO0VBQ0osQ0FBQSxHQUFJLE1BQUEsQ0FBTyxFQUFQLEVBQVUsR0FBVjtFQUNKLEVBQUEsR0FBSyxNQUFBLENBQU8sQ0FBQyxDQUFSLEVBQVUsQ0FBVjtFQUNMLEVBQUEsR0FBSyxNQUFBLENBQU8sQ0FBQyxHQUFSLEVBQVksR0FBWjtFQUdMLENBQUEsR0FBSSxNQUFBLENBQU8sQ0FBUDtFQUNKLENBQUEsR0FBSSxNQUFBLENBQU8sQ0FBUDtFQUNKLENBQUEsR0FBSSxNQUFBLENBQU8sQ0FBUDtTQUNKLEtBQUssQ0FBQyxJQUFOLENBQVcsSUFBSSxJQUFKLENBQVMsQ0FBVCxFQUFXLENBQVgsRUFBYSxFQUFiLEVBQWdCLEVBQWhCLEVBQW1CLENBQW5CLEVBQXFCLENBQXJCLEVBQXVCLENBQXZCLENBQVg7QUFYWSIsInNvdXJjZXNDb250ZW50IjpbImFjdGl2ZSA9IDBcclxuc3RhcnQgPSBudWxsXHJcbnN0b3BwID0gMFxyXG5sZXZlbCA9IDBcclxucmFkaWUgPSA1MFxyXG5jb3VudGVyID0gMFxyXG5jb2wgPSBbMjU1LDAsMF1cclxuZCA9IFstMSwxLDBdXHJcblxyXG5jbGFzcyBCYWxsXHJcblx0Y29uc3RydWN0b3IgOiAoQHgsIEB5LCBAZHgsIEBkeSwgQHIsIEBnLCBAYikgLT5cclxuXHRcdEBhY3RpdmUgPSB0cnVlXHJcblx0cml0YSA6IC0+XHJcblx0XHRpZiBub3QgQGFjdGl2ZSB0aGVuIHJldHVybiBcclxuXHRcdGlmIEB4ID4gd2lkdGgtcmFkaWUgdGhlbiBAZHggPSAtQGR4XHJcblx0XHRpZiBAeCA8IHJhZGllIHRoZW4gQGR4ID0gLUBkeFxyXG5cdFx0QHggKz0gQGR4XHJcblxyXG5cdFx0aWYgQHkgPiBoZWlnaHQtcmFkaWUgdGhlbiBAZHkgPSAtQGR5IGVsc2UgQGR5Kz0wLjFcclxuXHJcblx0XHRAeSArPSBAZHlcclxuXHRcdGZjIEByLEBnLEBiXHJcblx0XHRjaXJjbGUgQHgsQHkscmFkaWVcclxuXHRpbnNpZGUgOiAobXgsbXkpIC0+IGRpc3QoQHgsQHksbXgsbXkpIDwgcmFkaWVcclxuXHJcbmJhbGxzID0gW11cclxuXHJcbnNldHVwID0gLT5cclxuXHRjcmVhdGVDYW52YXMgd2luZG93V2lkdGgsd2luZG93SGVpZ2h0XHJcblx0cmFkaWUgPSAod2luZG93V2lkdGgrd2luZG93SGVpZ2h0KS8zMFxyXG5cdHJlc2V0KClcclxuXHJcbnJlc2V0ID0tPlxyXG5cdGxldmVsKytcclxuXHRyYWRpZSAqPSAwLjk1XHJcblx0c3RhcnQgPSBuZXcgRGF0ZSgpXHJcblx0Zm9yIGkgaW4gcmFuZ2UgbGV2ZWxcclxuXHRcdGNyZWF0ZUJhbGwoKVxyXG5cclxuZHJhdyA9IC0+XHJcblx0YmFja2dyb3VuZCBjb2xbMF0sY29sWzFdLGNvbFsyXVxyXG5cdGZvciBiYWxsIGluIGJhbGxzXHJcblx0XHRiYWxsLnJpdGEoKVxyXG5cdGlmIGFjdGl2ZT09MFxyXG5cdFx0c2MgMFxyXG5cdFx0c3cgM1xyXG5cdFx0ZmMgMVxyXG5cdFx0dGV4dFNpemUgNTBcclxuXHRcdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0XHR0ZXh0IChzdG9wcC1zdGFydCkvMTAwMCx3aWR0aC8yLGhlaWdodC8yXHJcblxyXG5cdGlmIGZyYW1lQ291bnQlMiA9PSAwXHJcblx0XHRjb3VudGVyKytcclxuXHRcdGlmIGNvdW50ZXIgJSAyNTcgPT0gMjU2XHJcblx0XHRcdGZvciBpIGluIHJhbmdlIDNcclxuXHRcdFx0XHRkW2ldID0gaWYgY29sW2ldID4gMTI4IHRoZW4gXy5yYW5kb20gLTEsMCBlbHNlIF8ucmFuZG9tIDAsMVxyXG5cdFx0ZWxzZSBjb2xbaV0gKz0gZFtpXSBmb3IgaSBpbiByYW5nZSAzXHJcblxyXG5cclxuXHJcbm1vdXNlUHJlc3NlZCA9IC0+XHJcblx0aWYgYWN0aXZlID09IDBcclxuXHRcdHJlc2V0KClcclxuXHRlbHNlXHJcblx0XHRmb3IgaSBpbiByYW5nZSBiYWxscy5sZW5ndGgtMSwtMSwtMVxyXG5cdFx0XHRiYWxsPWJhbGxzW2ldXHJcblx0XHRcdGlmIGJhbGwuYWN0aXZlIGFuZCBiYWxsLmluc2lkZSBtb3VzZVgsbW91c2VZIFxyXG5cdFx0XHRcdGJhbGwuYWN0aXZlID0gZmFsc2VcclxuXHRcdFx0XHRhY3RpdmUtLVxyXG5cdFx0XHRcdGlmIGFjdGl2ZSA9PSAwXHJcblx0XHRcdFx0XHRzdG9wcCA9IG5ldyBEYXRlKCkgXHJcblx0XHRcdFx0YnJlYWtcclxuXHJcbmNyZWF0ZUJhbGwgPSAtPlxyXG5cdGFjdGl2ZSsrXHJcblx0eCA9IHJhbmRvbSA1MCx3aWR0aFxyXG5cdHkgPSByYW5kb20gNTAsMTAwXHJcblx0ZHggPSByYW5kb20gLTIsMlxyXG5cdGR5ID0gcmFuZG9tIC0wLjMsMC4zXHJcblxyXG5cdFxyXG5cdHIgPSByYW5kb20gMVxyXG5cdGcgPSByYW5kb20gMVxyXG5cdGIgPSByYW5kb20gMVxyXG5cdGJhbGxzLnB1c2ggbmV3IEJhbGwgeCx5LGR4LGR5LHIsZyxiXHJcbiJdfQ==
//# sourceURL=c:\Users\MIXITRIXI\LAB\balls\coffee\sketch.coffee